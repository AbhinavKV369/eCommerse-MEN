<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Truck Haulers - Your Orders</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<%- include("partials/head") %>

    <body>
        <%- include("partials/navbar") %>

            <div class="container mt-5 mb-5">
                <h2 class="mb-4 text-center text-md-start">Your Orders</h2>

                <!-- Responsive Table Wrapper -->
                <div class="table-responsive">
                    <table class="table table-striped align-middle">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col">Order #</th>
                                <th scope="col">Order Date</th>
                                <th scope="col">Status</th>
                                <th scope="col">Total Amount</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% orders.forEach(order=> { %>
                                <tr class="fw-bold">
                                    <td>
                                        <%= order.id %>
                                    </td>
                                    <td>
                                        <%= new Date(order.orderDate).toLocaleDateString() %>
                                    </td>
                                    <td class="<%= order.status === 'cancelled' ? 'text-danger' : 'text-success' %>">
                                        <%= order.status %>
                                    </td>
                                    <td>Rs. <%= order.totalAmount %>
                                    </td>
                                    <td>
                                        <form action="/cancel-order/<%= order.id %>" method="post">
                                            <button type="submit"
                                                class="btn btn-sm <%= order.status === 'cancelled' ? 'btn-secondary' : 'btn-danger' %>"
                                                <%=order.status==='cancelled' ? 'disabled' : '' %>>
                                                <%= order.status==='cancelled' ? 'Cancelled' : 'Cancel Order' %>
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                                <% }); %>
                        </tbody>
                    </table>
                </div>
            </div>

            <%- include("partials/footer") %>
    </body>

</html>